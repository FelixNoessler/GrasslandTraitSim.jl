<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Difference equation · GrasslandTraitSim.jl</title><meta name="title" content="Difference equation · GrasslandTraitSim.jl"/><meta property="og:title" content="Difference equation · GrasslandTraitSim.jl"/><meta property="twitter:title" content="Difference equation · GrasslandTraitSim.jl"/><meta name="description" content="Documentation for GrasslandTraitSim.jl."/><meta property="og:description" content="Documentation for GrasslandTraitSim.jl."/><meta property="twitter:description" content="Documentation for GrasslandTraitSim.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">GrasslandTraitSim.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../model_io/">Model input and output</a></li><li><a class="tocitem" href="../../parameter/">Parameter</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/how_to_prepare_input/">Prepare input and run simulation</a></li><li><a class="tocitem" href="../../tutorials/how_to_analyse_output/">Analyse model output</a></li><li><a class="tocitem" href="../../tutorials/how_to_heterogeneous_site_management/">Heterogenous site or management conditions</a></li></ul></li><li><span class="tocitem">Model description</span><ul><li class="is-active"><a class="tocitem" href>Difference equation</a><ul class="internal"><li><a class="tocitem" href="#Main-loop"><span>Main loop</span></a></li></ul></li><li><a class="tocitem" href="../initialization/">Initialization</a></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Biomass dynamic</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../biomass_dynamic/">Overview</a></li><li><a class="tocitem" href="../growth/">Growth</a></li><li><a class="tocitem" href="../senescence/">Senescence</a></li><li><a class="tocitem" href="../defoliation/">Mowing, grazing, and trampling</a></li><li><a class="tocitem" href="../clonalgrowth/">Clonal growth</a></li></ul></li><li><a class="tocitem" href="../water/">Water dynamics</a></li></ul></li><li><span class="tocitem">Calibration to grasslands of the Biodiversity Exploratories</span><ul><li><a class="tocitem" href="../../biodiversity_exploratories/calibration_data/">Calibration data</a></li><li><a class="tocitem" href="../../biodiversity_exploratories/likelihood/">Likelihood</a></li><li><a class="tocitem" href="../../biodiversity_exploratories/priors/">Priors</a></li></ul></li><li><a class="tocitem" href="../../all_functions/">TOC all functions</a></li><li><a class="tocitem" href="../../References/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model description</a></li><li class="is-active"><a href>Difference equation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Difference equation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/FelixNoessler/GrasslandTraitSim.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/FelixNoessler/GrasslandTraitSim.jl/blob/master/docs/src/Modelling_API/main_equations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Difference-equation"><a class="docs-heading-anchor" href="#Difference-equation">Difference equation</a><a id="Difference-equation-1"></a><a class="docs-heading-anchor-permalink" href="#Difference-equation" title="Permalink"></a></h1><p>The main function to solve the difference equations and get the solution with all parameters is <a href="#GrasslandTraitSim.solve_prob">solve_prob</a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GrasslandTraitSim.solve_prob" href="#GrasslandTraitSim.solve_prob"><code>GrasslandTraitSim.solve_prob</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">solve_prob(; input_obj, inf_p, calc = nothing)</code></pre><p>Solve the model for one site.</p><p>Intialize the parameters, the state variables and the output vectors. In addition some vectors are preallocated to avoid allocations in the main loop. Then, run the main loop and store the results with all parameters in a container.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FelixNoessler/GrasslandTraitSim.jl/blob/124d0c9a777a5b278c6cfcbb3004dd2c319a6710/src/main_functions.jl#L1-L9">source</a></section></article><h2 id="Main-loop"><a class="docs-heading-anchor" href="#Main-loop">Main loop</a><a id="Main-loop-1"></a><a class="docs-heading-anchor-permalink" href="#Main-loop" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GrasslandTraitSim.main_loop!" href="#GrasslandTraitSim.main_loop!"><code>GrasslandTraitSim.main_loop!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">main_loop!(; container)</code></pre><p>Run the main loop for all days.</p><p>Calls the function <a href="#GrasslandTraitSim.one_day!"><code>one_day!</code></a> for each day and set the calculated density differences to the output variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FelixNoessler/GrasslandTraitSim.jl/blob/124d0c9a777a5b278c6cfcbb3004dd2c319a6710/src/main_functions.jl#L32-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GrasslandTraitSim.one_day!" href="#GrasslandTraitSim.one_day!"><code>GrasslandTraitSim.one_day!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">one_day!(; container, p, t)</code></pre><p>Calculate the density differences of all state variables of one day.</p><p>Density differences for biomass:</p><p class="math-container">\[\text{du_biomass} = \text{growth} - \text{senescence} - \text{defoliation}\]</p><p>Density differences for water:</p><p class="math-container">\[\text{du_water} = \text{precipitation} - \text{drainage} - \text{actual_evapotranspiration}\]</p><p><strong>Main procedure (in the following order):</strong></p><p>if npatches &gt; 1</p><ul><li><a href="../defoliation/#GrasslandTraitSim.calculate_relbiomass!">calculate relative biomass per patch</a>, this is needed for <a href="../defoliation/#GrasslandTraitSim.grazing!">grazing</a> and <a href="../defoliation/#GrasslandTraitSim.trampling!">trampling</a></li><li><a href="../clonalgrowth/#GrasslandTraitSim.clonalgrowth!">clonal growth</a> at day of the year = 250</li></ul><p>loop over patches:</p><ul><li>set very low biomass (&lt; 1e-30 kg ha⁻¹) to zero</li><li>defoliation (<a href="../defoliation/#GrasslandTraitSim.mowing!">mowing</a>, <a href="../defoliation/#GrasslandTraitSim.grazing!">grazing</a>, <a href="../defoliation/#GrasslandTraitSim.trampling!">trampling</a>)</li><li><a href="../growth/#GrasslandTraitSim.growth!">growth</a></li><li><a href="../senescence/#GrasslandTraitSim.senescence!">senescence</a></li><li><a href="../water/#GrasslandTraitSim.change_water_reserve">soil water dynamics</a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FelixNoessler/GrasslandTraitSim.jl/blob/124d0c9a777a5b278c6cfcbb3004dd2c319a6710/src/one_day.jl#L1-L34">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/how_to_heterogeneous_site_management/">« Heterogenous site or management conditions</a><a class="docs-footer-nextpage" href="../initialization/">Initialization »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 1 February 2024 21:50">Thursday 1 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
